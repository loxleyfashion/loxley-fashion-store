<!DOCTYPE html>
<html>
<head>
  <title>Checkout â€“ Loxley</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="logo">LOXLEY</div>

<iframe name="hidden_iframe" style="display:none;"></iframe>

<form class="order-form"
      method="POST"
      action="https://docs.google.com/forms/d/e/1FAIpQLScKUjwd3C46jdW_NDOFTzc1Lobiy2_trqGuc1izN1Y8aMdi6Q/formResponse"
      target="hidden_iframe">

  <!-- AUTO INJECTED PRODUCT -->
  <input type="hidden" name="entry.2094167033" id="productField">

  <input type="text" name="entry.433871083" placeholder="Full Name" required>
  <input type="text" name="entry.1365619003" placeholder="Phone Number" required>
  <input type="text" name="entry.74629137" placeholder="Address" required>

  <select name="entry.2006505239" required>
    <option value="">Select Size</option>
    <option value="M">M</option>
    <option value="L">L</option>
    <option value="XL">XL</option>
    <option value="XXL">XXL</option>
  </select>

  <input name="entry.1455588550" placeholder="Pincode" required>
  <input name="entry.95104987" placeholder="City" required>

  <button type="submit">Place Order</button>
</form>

<script>
  // Pre-fill product from URL
  const params = new URLSearchParams(window.location.search);
  document.getElementById("productField").value =
    params.get("product") || "Unknown Product";

  // After submission, wait then go to success
  let formSubmitted = false;
  document.querySelector("form").addEventListener("submit", () => {
    formSubmitted = true;
  });

  window.onload = () => {
    const iframe = document.querySelector("iframe[name='hidden_iframe']");
    iframe.onload = () => {
      if (formSubmitted) {
        location.href = "success.html";
      }
    };
  };
</script>

</body>
</html>
